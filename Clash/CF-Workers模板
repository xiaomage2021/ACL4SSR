addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  const url = new URL(request.url)

  // æ£€æŸ¥è·¯å¾„æ˜¯å¦åŒ¹é… "/dy"
  if (url.pathname === '/dy') {
    const clashConfig = `
port: 7890
socks-port: 7891
allow-lan: false
mode: Rule
log-level: info
external-controller: 127.0.0.1:9090
secret: ""

proxy-providers:
  69äº‘:
    type: http
    url: https://checkhere.top/link/v2ZUd10nJ0WjPJbp?clash=1
    interval: 86400
    path: ./69yun.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  å°é©¬è®¢é˜…â‘ :
    type: http
    url: https://dy01.235mail.com/05c6ae0c-84f5-441e-909f-9d3e49bde9a7?clash
    interval: 86400
    path: ./xiaoma_01.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  å°é©¬è®¢é˜…â‘¡:
    type: http
    url: https://dy02.235mail.com/dy?clash
    interval: 86400
    path: ./xiaoma_02.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  CMå¤§ä½¬Trojanè®¢é˜…:
    type: http
    url: https://altrojan.filegear-sg.me/TCorg
    interval: 86400
    path: ./cmdlaotrojan.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  CMå¤§ä½¬VLESSè®¢é˜…:
    type: http
    url: https://alvless.comorg.us.kg/TCorg
    interval: 86400
    path: ./cmdlaovless.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  å¤©è¯šå¤§ä½¬VLESSè®¢é˜…:
    type: http
    url: https://vless.fxxk.dedyn.io/auto
    interval: 86400
    path: ./tianchenglaovless.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  Kingå¤§ä½¬è®¢é˜…:
    type: http
    url: http://allsub.king361.cf
    interval: 86400
    path: ./kinglao.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  OTCå¤§ä½¬è®¢é˜…:
    type: http
    url: https://sub.kaiche.tk/?token=auto
    interval: 86400
    path: ./otclao.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  3Kå¤§ä½¬è®¢é˜…:
    type: http
    url: https://3k.fxxk.dedyn.io/sub
    interval: 86400
    path: ./3klao.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  MoistRå¤§ä½¬Trojanè®¢é˜…:
    type: http
    url: https://moist.freenods.sbs/Trojan
    interval: 86400
    path: ./moistrtrojan.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

  MoistRå¤§ä½¬VLESSè®¢é˜…:
    type: http
    url: https://moistr.freenods.sbs/mianfeicf
    interval: 86400
    path: ./moistrvless.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.google.com/generate_204

proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - ğŸŒ è‡ªåŠ¨é€‰æ‹©
      - ğŸ”§ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ“Š è´Ÿè½½å‡è¡¡
      - ğŸ”„ æ•…éšœè½¬ç§»
      - ğŸ›« 69äº‘
      - ğŸ å°é©¬è®¢é˜…â‘ 
      - ğŸ¦„ å°é©¬è®¢é˜…â‘¡
      - ğŸ›¡ï¸ CMå¤§ä½¬Trojanè®¢é˜…
      - ğŸ”‘ CMå¤§ä½¬VLESSè®¢é˜…
      - ğŸ¦… å¤©è¯šå¤§ä½¬VLESSè®¢é˜…
      - ğŸ‘‘ Kingå¤§ä½¬è®¢é˜…
      - âš¡ OTCå¤§ä½¬è®¢é˜…
      - ğŸŒ  3Kå¤§ä½¬è®¢é˜…
      - ğŸ’¦ MoistRå¤§ä½¬Trojanè®¢é˜…
      - ğŸŒŠ MoistRå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸŒ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - å°é©¬è®¢é˜…â‘ 
      - å°é©¬è®¢é˜…â‘¡
      - CMå¤§ä½¬Trojanè®¢é˜…
      - CMå¤§ä½¬VLESSè®¢é˜…
      - å¤©è¯šå¤§ä½¬VLESSè®¢é˜…
      - Kingå¤§ä½¬è®¢é˜…
      - OTCå¤§ä½¬è®¢é˜…
      - 3Kå¤§ä½¬è®¢é˜…
      - MoistRå¤§ä½¬Trojanè®¢é˜…
      - MoistRå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ”§ æ‰‹åŠ¨åˆ‡æ¢"
    type: select
    use:
      - å°é©¬è®¢é˜…â‘ 
      - å°é©¬è®¢é˜…â‘¡
      - CMå¤§ä½¬Trojanè®¢é˜…
      - CMå¤§ä½¬VLESSè®¢é˜…
      - å¤©è¯šå¤§ä½¬VLESSè®¢é˜…
      - Kingå¤§ä½¬è®¢é˜…
      - OTCå¤§ä½¬è®¢é˜…
      - 3Kå¤§ä½¬è®¢é˜…
      - MoistRå¤§ä½¬Trojanè®¢é˜…
      - MoistRå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ“Š è´Ÿè½½å‡è¡¡"
    type: load-balance
    use:
      - å°é©¬è®¢é˜…â‘ 
      - å°é©¬è®¢é˜…â‘¡
      - CMå¤§ä½¬Trojanè®¢é˜…
      - CMå¤§ä½¬VLESSè®¢é˜…
      - å¤©è¯šå¤§ä½¬VLESSè®¢é˜…
      - Kingå¤§ä½¬è®¢é˜…
      - OTCå¤§ä½¬è®¢é˜…
      - 3Kå¤§ä½¬è®¢é˜…
      - MoistRå¤§ä½¬Trojanè®¢é˜…
      - MoistRå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ”„ æ•…éšœè½¬ç§»"
    type: fallback
    use:
      - å°é©¬è®¢é˜…â‘ 
      - å°é©¬è®¢é˜…â‘¡
      - CMå¤§ä½¬Trojanè®¢é˜…
      - CMå¤§ä½¬VLESSè®¢é˜…
      - å¤©è¯šå¤§ä½¬VLESSè®¢é˜…
      - Kingå¤§ä½¬è®¢é˜…
      - OTCå¤§ä½¬è®¢é˜…
      - 3Kå¤§ä½¬è®¢é˜…
      - MoistRå¤§ä½¬Trojanè®¢é˜…
      - MoistRå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ¾ ç‰¹æ®ŠæœåŠ¡"
    type: select
    proxies:
      - ğŸ›« 69äº‘
      - ğŸ å°é©¬è®¢é˜…â‘ 
      - ğŸ¦„ å°é©¬è®¢é˜…â‘¡

  # ä¸ºæ¯ä¸ªæœºåœºå•ç‹¬åˆ›å»ºä¸€ä¸ªç­–ç•¥ç»„
  - name: "ğŸ›« 69äº‘"
    type: fallback
    use:
      - 69äº‘

  - name: "ğŸ å°é©¬è®¢é˜…â‘ "
    type: fallback
    use:
      - å°é©¬è®¢é˜…â‘ 

  - name: "ğŸ¦„ å°é©¬è®¢é˜…â‘¡"
    type: fallback
    use:
      - å°é©¬è®¢é˜…â‘¡

  - name: "ğŸ›¡ï¸ CMå¤§ä½¬Trojanè®¢é˜…"
    type: fallback
    use:
      - CMå¤§ä½¬Trojanè®¢é˜…

  - name: "ğŸ”‘ CMå¤§ä½¬VLESSè®¢é˜…"
    type: fallback
    use:
      - CMå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ¦… å¤©è¯šå¤§ä½¬VLESSè®¢é˜…"
    type: fallback
    use:
      - å¤©è¯šå¤§ä½¬VLESSè®¢é˜…

  - name: "ğŸ‘‘ Kingå¤§ä½¬è®¢é˜…"
    type: fallback
    use:
      - Kingå¤§ä½¬è®¢é˜…

  - name: "âš¡ OTCå¤§ä½¬è®¢é˜…"
    type: fallback
    use:
      - OTCå¤§ä½¬è®¢é˜…

  - name: "ğŸŒ  3Kå¤§ä½¬è®¢é˜…"
    type: fallback
    use:
      - 3Kå¤§ä½¬è®¢é˜…

  - name: "ğŸ’¦ MoistRå¤§ä½¬Trojanè®¢é˜…"
    type: fallback
    use:
      - MoistRå¤§ä½¬Trojanè®¢é˜…

  - name: "ğŸŒŠ MoistRå¤§ä½¬VLESSè®¢é˜…"
    type: fallback
    use:
      - MoistRå¤§ä½¬VLESSè®¢é˜…

rules:
  # å¸¸ç”¨æœåŠ¡
  - DOMAIN-SUFFIX,google.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,youtube.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,facebook.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,twitter.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,instagram.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,whatsapp.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,netflix.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,spotify.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,github.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,wikipedia.org,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # Telegram ç›¸å…³
  - DOMAIN-SUFFIX,telegram.org,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,t.me,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,telegraph.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,telegra.ph,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # OpenAI ç›¸å…³è§„åˆ™èµ°ç‰¹æ®ŠæœåŠ¡ç­–ç•¥ç»„
  - DOMAIN-SUFFIX,openai.com,ğŸ¾ ç‰¹æ®ŠæœåŠ¡
  - DOMAIN-SUFFIX,api.openai.com,ğŸ¾ ç‰¹æ®ŠæœåŠ¡
  - DOMAIN-SUFFIX,chat.openai.com,ğŸ¾ ç‰¹æ®ŠæœåŠ¡
  - DOMAIN-SUFFIX,chatgpt.com,ğŸ¾ ç‰¹æ®ŠæœåŠ¡

  # ç‰¹æ®Šç½‘ç«™åˆ†æµ 
  - DOMAIN-SUFFIX,socialblade.com,ğŸ¾ ç‰¹æ®ŠæœåŠ¡

  # å›½å†…åº”ç”¨ç›´è¿
  - DOMAIN-SUFFIX,weixin.qq.com,DIRECT  # å¾®ä¿¡
  - DOMAIN-SUFFIX,wechat.com,DIRECT     # å¾®ä¿¡
  - DOMAIN-SUFFIX,qq.com,DIRECT         # QQ
  - DOMAIN-SUFFIX,mail.qq.com,DIRECT    # QQé‚®ç®±
  - DOMAIN-SUFFIX,baidu.com,DIRECT      # ç™¾åº¦
  - DOMAIN-SUFFIX,weibo.com,DIRECT      # å¾®åš
  - DOMAIN-SUFFIX,zhihu.com,DIRECT      # çŸ¥ä¹
  - DOMAIN-SUFFIX,toutiao.com,DIRECT    # ä»Šæ—¥å¤´æ¡
  - DOMAIN-SUFFIX,ixigua.com,DIRECT     # è¥¿ç“œè§†é¢‘
  - DOMAIN-SUFFIX,douyin.com,DIRECT     # æŠ–éŸ³
  - DOMAIN-SUFFIX,aliyun.com,DIRECT     # é˜¿é‡Œäº‘
  - DOMAIN-SUFFIX,taobao.com,DIRECT     # æ·˜å®
  - DOMAIN-SUFFIX,tmall.com,DIRECT      # å¤©çŒ«
  - DOMAIN-SUFFIX,jd.com,DIRECT         # äº¬ä¸œ

  # å¹¿å‘Šå±è”½
  - DOMAIN-SUFFIX,adservice.google.com,REJECT
  - DOMAIN-SUFFIX,doubleclick.net,REJECT
  - DOMAIN-SUFFIX,googlesyndication.com,REJECT
  - DOMAIN-SUFFIX,google-analytics.com,REJECT

  # å›½å†…ç½‘ç«™ç›´è¿
  - GEOIP,CN,DIRECT
  - DOMAIN-SUFFIX,cn,DIRECT

  # é»˜è®¤è§„åˆ™
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    `;

    return new Response(clashConfig, {
      headers: { 'Content-Type': 'application/x-yaml' },
    })
  } else {
    return new Response('Not found', { status: 404 })
  }
}
